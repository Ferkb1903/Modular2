# ===================================================================
# MACRO REALISTA PARA PHANTOM DE AGUA PURA (REFERENCIA)
# ===================================================================
# 
# ðŸŽ¯ CONFIGURACIÃ“N DE REFERENCIA:
#    â€¢ Phantom homogÃ©neo de agua
#    â€¢ Sin heterogeneidades
#    â€¢ GeometrÃ­a idÃ©ntica para comparaciÃ³n directa
#
# Autor: Equipo de FÃ­sica MÃ©dica
# Fecha: Septiembre 2024
# ===================================================================

/control/verbose 0
/tracking/verbose 0
/run/verbose 0
/event/verbose 0

# ===================================================================
# CONFIGURACIÃ“N DEL DETECTOR
# ===================================================================

# Seleccionar fuente TG186 (Ir-192)
/source/switch TG186

# ===================================================================
# CONFIGURACIÃ“N DE MATERIALES
# ===================================================================

# Mantener phantom como agua (material por defecto)
# /phantom/selectMaterial G4_WATER

# Deshabilitar heterogeneidades (phantom homogÃ©neo)
/phantom/enableHeterogeneities false

# ===================================================================
# CONFIGURACIÃ“N DE FÃSICA
# ===================================================================
/testem/phys/addPhysics emlivermore

# ===================================================================
# CONFIGURACIÃ“N DE SCORING 
# ===================================================================
# Usar exactamente el mismo scoring que heterogeneidades para comparaciÃ³n

# Crear scoring mesh centrado en el origen
/score/create/boxMesh boxMesh_1

# TamaÃ±o ajustado a la geometrÃ­a real del phantom (30Ã—30Ã—30 cm total)
# Phantom radio = 15 cm, usamos Â±14 cm para estar dentro
/score/mesh/boxSize 14. 14. 0.025 cm
/score/mesh/nBin 140 140 1
/score/mesh/translate/xyz 0. 0. 0. cm

# Configurar scorer de deposiciÃ³n de energÃ­a
/score/quantity/energyDeposit eDep

# ===================================================================
# CONFIGURACIÃ“N DE SIMULACIÃ“N
# ===================================================================

# Inicializar el kernel de Geant4
/run/initialize

# NÃºmero de eventos para prueba inicial (reducido para testing)
/run/beamOn 100000

# ===================================================================
# SALIDA DE RESULTADOS
# ===================================================================
# ORIGINAL: /score/dumpQuantityToFile boxMesh_1 eDep EnergyDeposition_REAL_Water.out
# ==> CONVERTIDO A ROOT OUTPUT:
/score/dumpQuantityToFile boxMesh_1 eDep EnergyDeposition_REAL_Water.root
