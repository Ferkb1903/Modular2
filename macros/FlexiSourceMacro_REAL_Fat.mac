# ===================================================================
# MACRO REALISTA PARA HETEROGENEIDAD DE GRASA
# ===================================================================
# 
# ðŸŽ¯ CONFIGURACIÃ“N USANDO COMANDOS DISPONIBLES:
#    â€¢ GeometrÃ­a: Hard-coded en el cÃ³digo (no modificable por macro)
#    â€¢ Material phantom: Configurable via /phantom/selectMaterial
#    â€¢ Heterogeneidades: Configurables via /phantom/enableHeterogeneities
#    â€¢ Tipo heterogeneidad: bone, muscle, fat, lung
#
# ðŸ“ GEOMETRÃA FIJA (definida en cÃ³digo):
#    â€¢ TamaÃ±o exacto depende de la implementaciÃ³n
#    â€¢ Scoring mesh debe ajustarse a geometrÃ­a real
#
# Autor: Equipo de FÃ­sica MÃ©dica
# Fecha: Septiembre 2024
# ===================================================================

/control/verbose 0
/tracking/verbose 0
/run/verbose 0
/event/verbose 0

# ===================================================================
# CONFIGURACIÃ“N DEL DETECTOR
# ===================================================================

# Seleccionar fuente TG186 (Ir-192)
/source/switch TG186

# ===================================================================
# CONFIGURACIÃ“N DE MATERIALES
# ===================================================================

# Mantener phantom como agua (material por defecto)
# /phantom/selectMaterial G4_WATER

# Habilitar heterogeneidades
/phantom/enableHeterogeneities true

# Configurar heterogeneidad como grasa (adipose tissue)
/phantom/setHeterogeneityType fat

# ===================================================================
# CONFIGURACIÃ“N DE FÃSICA
# ===================================================================
/testem/phys/addPhysics emlivermore

# ===================================================================
# CONFIGURACIÃ“N DE SCORING 
# ===================================================================
# NOTA: El tamaÃ±o debe ajustarse a la geometrÃ­a real del phantom
# Usamos el mismo tamaÃ±o que para hueso para comparaciÃ³n directa

# Crear scoring mesh centrado en el origen
/score/create/boxMesh boxMesh_1

# TamaÃ±o ajustado a la geometrÃ­a real del phantom (30Ã—30Ã—30 cm total)
# Phantom radio = 15 cm, usamos Â±14 cm para estar dentro
/score/mesh/boxSize 14. 14. 0.025 cm
/score/mesh/nBin 140 140 1
/score/mesh/translate/xyz 0. 0. 0. cm

# Configurar scorer de deposiciÃ³n de energÃ­a
/score/quantity/energyDeposit eDep

# ===================================================================
# CONFIGURACIÃ“N DE SIMULACIÃ“N
# ===================================================================

# NÃºmero de eventos para prueba inicial (reducido para testing)
/run/beamOn 100000

# ===================================================================
# SALIDA DE RESULTADOS
# ===================================================================
# ORIGINAL: # ORIGINAL: /score/dumpQuantityToFile boxMesh_1 eDep EnergyDeposition_REAL_Fat.out
# ==> CONVERTIDO A ROOT OUTPUT:
/score/dumpQuantityToFile ORIGINAL: /score/dumpQuantityToFile boxMesh_1
# ==> CONVERTIDO A ROOT OUTPUT:
/score/dumpQuantityToFile boxMesh_1 eDep EnergyDeposition_REAL_Fat.root
