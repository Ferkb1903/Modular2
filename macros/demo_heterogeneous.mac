# Macro de demostraciÃ³n visual avanzada - Todas las geometrÃ­as
# Para visualizaciÃ³n interactiva de diferentes escenarios

# Inicializar geometrÃ­a
/run/initialize

# Configurar visualizaciÃ³n avanzada
/vis/open OGLSQt 1000x800-0+0
/vis/drawVolume

# Configurar vista Ã³ptima para mostrar heterogeneidades
/vis/viewer/set/viewpointVector -1 -1 -0.5
/vis/viewer/set/lightsVector -1 0 0
/vis/viewer/set/upVector 0 0 1
/vis/viewer/zoom 2

# Configurar estilo para ver materiales diferentes
/vis/viewer/set/style surface
/vis/viewer/set/hiddenMarker true
/vis/viewer/set/auxiliaryEdge true

# Hacer volÃºmenes semi-transparentes para ver estructura interna
/vis/geometry/set/visibility World 0 false
/vis/geometry/set/colour WaterPhantom 0 0.7 0.9 1.0 0.3

# Resaltar diferentes materiales
/vis/geometry/set/colour BoneCortical 0 1.0 1.0 0.8 0.8    # Hueso: amarillo
/vis/geometry/set/colour AirCavity 0 0.9 0.9 0.9 0.1       # Aire: gris transparente
/vis/geometry/set/colour Muscle 0 0.8 0.4 0.4 0.6          # MÃºsculo: rojo
/vis/geometry/set/colour Fat 0 1.0 1.0 0.4 0.5            # Grasa: amarillo claro
/vis/geometry/set/colour Bladder 0 0.4 0.4 0.8 0.4         # Vejiga: azul
/vis/geometry/set/colour Rectum 0 0.6 0.3 0.3 0.4          # Recto: marrÃ³n

# Resaltar fuente y aplicador
/vis/geometry/set/colour SourceCore 0 1.0 0.2 0.2 1.0      # NÃºcleo: rojo brillante
/vis/geometry/set/colour SourceEncap 0 0.8 0.8 0.8 0.9     # Encapsulado: metÃ¡lico
/vis/geometry/set/colour Applicator 0 0.5 0.5 1.0 0.8      # Aplicador: azul metÃ¡lico

# Configurar trayectorias de partÃ­culas
/vis/scene/add/trajectories smooth
/vis/modeling/trajectories/create/drawByParticleID

# Colores distintivos para diferentes partÃ­culas
/vis/modeling/trajectories/drawByParticleID-0/set gamma blue
/vis/modeling/trajectories/drawByParticleID-0/set e- red
/vis/modeling/trajectories/drawByParticleID-0/set e+ green
/vis/modeling/trajectories/drawByParticleID-0/set proton yellow
/vis/modeling/trajectories/drawByParticleID-0/set neutron white

# Configurar pasos de trayectoria visibles
/vis/modeling/trajectories/drawByParticleID-0/default/setDrawStepPts true
/vis/modeling/trajectories/drawByParticleID-0/default/setStepPtsSize 2

# Mostrar deposiciÃ³n de energÃ­a
/vis/scene/add/hits

# InformaciÃ³n en pantalla
/vis/set/textColour red
/vis/set/textLayout right
/vis/scene/add/text2D 0.02 0.95 24 ! ! "HDR Brachytherapy - Heterogeneous Phantom"
/vis/scene/add/text2D 0.02 0.90 18 ! ! "Ir-192 Source + Multiple Tissues"

/vis/set/textColour blue  
/vis/scene/add/text2D 0.02 0.85 16 ! ! "Materials:"
/vis/scene/add/text2D 0.02 0.80 14 ! ! "  Bone (yellow)"
/vis/scene/add/text2D 0.02 0.76 14 ! ! "  Air (transparent)"
/vis/scene/add/text2D 0.02 0.72 14 ! ! "  Muscle (red)"
/vis/scene/add/text2D 0.02 0.68 14 ! ! "  Fat (light yellow)"
/vis/scene/add/text2D 0.02 0.64 14 ! ! "  Water (blue)"

/vis/set/textColour green
/vis/scene/add/text2D 0.02 0.58 16 ! ! "Particles:"
/vis/scene/add/text2D 0.02 0.54 14 ! ! "  Gamma (blue lines)"
/vis/scene/add/text2D 0.02 0.50 14 ! ! "  e- (red lines)"
/vis/scene/add/text2D 0.02 0.46 14 ! ! "  e+ (green lines)"

# Ejes de coordenadas
/vis/scene/add/axes 0 0 0 20 mm

# Escala de referencia
/vis/scene/add/scale 30 mm z 1 0 0 manual -40 0 -40 mm

# Activar auto-refresh
/vis/viewer/set/autoRefresh true

echo "================================================="
echo "DEMOSTRACIÃ“N VISUAL INTERACTIVA"
echo "================================================="
echo "ðŸŽ¬ Ventana OpenGL abierta con geometrÃ­a completa"
echo ""
echo "ðŸŽ® Controles de visualizaciÃ³n:"
echo "  â€¢ Mouse: Rotar vista 3D"
echo "  â€¢ Scroll: Zoom in/out"
echo "  â€¢ Ctrl+Mouse: Pan/Desplazar"
echo ""
echo "ðŸ“Š Materiales visibles:"
echo "  ðŸŸ¡ Hueso cortical (costillas)"
echo "  âšª Cavidades aÃ©reas (pulmÃ³n/intestino)" 
echo "  ðŸ”´ MÃºsculo esquelÃ©tico"
echo "  ðŸŸ¨ Tejido adiposo"
echo "  ðŸ”µ Vejiga (OAR)"
echo "  ðŸŸ¤ Recto (OAR)"
echo "  ðŸ’§ Agua (fondo)"
echo ""
echo "âš¡ Comandos de simulaciÃ³n:"
echo "  /run/beamOn 50      - Ejecutar 50 eventos"
echo "  /gun/energy 468 keV - Cambiar energÃ­a"
echo "  /vis/viewer/zoom 3  - Hacer zoom"
echo "================================================="

# Configurar generador para demostraciÃ³n
/gun/particle gamma
/gun/energy 317 keV
/gun/position 0 0 0 mm

# Ejecutar algunos eventos para demostraciÃ³n inicial
echo "ðŸš€ Ejecutando eventos de demostraciÃ³n..."
/run/beamOn 20

echo ""
echo "âœ… DemostraciÃ³n lista"
echo "ðŸ’¡ Ejecuta mÃ¡s eventos para ver interacciones:"
echo "   /run/beamOn 100"
